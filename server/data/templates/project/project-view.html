{% extends "base.html" %}

{% block title %}Project List{% endblock %}

{% block header %}<h2>Project: {{project.name}} <span id="filter-info" /></h2>{% endblock %}

{% block local-headers%}

<script>

    $(document).ready(function(){
        
        filter_rows()

        // makes entire row clickable
        $(".row").click(function(){
            window.location=$(this).find("a").attr("href"); return false;
        });

        // removes messages that may be present
        remove_messages()

    });
</script>

{% endblock %}

{% block mainbody %}

  <!-- main box left -->
  <div class="span-17 colborder" id="content">

      {% for p in projects %}
          <div class="project row quiet">
            <div class="project name">Project: <a href="/project/view/{{p.id}}">{{p.name}}</a></div>
            <div class="project status">Your role {{p.role}} &bull; 0 {{p.size}} datasets.</div>
          </div>
          
      {% endfor %}
      <div>&nbsp;</div>
      
  </div>

  <!-- left sidebar -->
  <div class="span-6 last" id="sidebar">
    <div>
      <h3 class="caps">Your Account &bull; <a href="/logout">Log out</a></h3>
      <div class="box">
          <div class="quiet">Logged in as <b>{{user.get_full_name}}</b></div>
          <div class="quiet">Project contains <b>{{project.data_count}}</b> datasets</div>
          <div>            
            <a href="/">Home page</a> &bull;
            <a href="/project/list">Project list</a>            
          </div>
      </div>
    </div>

    {% if project.is_manager %}
    <div>
      <h3 class="caps">Modify Project</h3>
      <div class="box">
          <div class="quiet" align="center">
          <a href="/project/edit/{{project.id}}/">Edit Project</a>
          &bull; 
          <a href="/project/delete/{{project.id}}/">Delete Project</a></div>
      </div>
    </div>
    {% endif %}

    <div>
      <h3 class="caps">Filter Data</h3>
      <div class="box" id="filter-box">
          <div class="quiet">Filter data by showing only 
          the names that match the text in the box below</div>
          <div class="quiet" >
            <span class="search">
              <input type="text" size="20" id="filter-input" style="margin-left:20px;">
            </span>
          </div>
      </div>
    </div>

    {% if user.is_superuser %}
    <div>
      <h3 class="caps">Admin Tools</h3>
      <div class="box">
          <div class="quiet">This account has administration privileges</div>
          <div style="padding-left:20px">
            <div class="quiet"> &bull <a href="#" class="quiet">access user list</a></div>
            <div class="quiet"> &bull <a href="#" class="quiet">access job queue</a></div>
            <div class="quiet"> &bull <a href="#" class="quiet">access server status</a></div>
          </div>
      </div>
    </div>
    {% endif %}

  </div>

{% endblock %}

